.SUFFIXES: .o .f08

# Compiler
FC  = gfortran 

# Flags
OFLAGS = -O3 -funroll-loops # -Optimization
DFLAGS = -g3 -finit-real-snan -fbacktrace -fcheck=all # debugging
WFLAGS = -Wall -Wextra -pedantic -std=f2008 -fall-intrinsics -Warray-temporaries -Wcharacter-truncation -Wconversion-extra # warnings

# Compiling rules, convert all .f08 files into .o files
.f08.o:
	$(FC) $(OFLAGS) $(WFLAGS) -c $*.f08

# Object modules
OBJ = FortranFunctions.o ArrayFunctions.o Applications.o

# Default targets
all: Quantum_Now Testing

#Quantum_Now (target) depends on all object files
Quantum_Now: $(OBJ) Main.o
	$(FC) -o $@ $(OFLAGS) $(WFLAGS) $^

Testing: $(OBJ) TestingFunctions.o
	$(FC) -o $@ $(OFLAGS) $(WFLAGS) $^

#Deletes files generated by compilation
clean:
	rm -f *.o *.mod Quantum_Now Testing

run-m: Quantum_Now
	./Quantum_Now

run-t: Testing
	./Testing

